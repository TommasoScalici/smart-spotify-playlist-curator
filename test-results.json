{
  "numTotalTestSuites": 22,
  "numPassedTestSuites": 20,
  "numFailedTestSuites": 2,
  "numPendingTestSuites": 0,
  "numTotalTests": 26,
  "numPassedTests": 22,
  "numFailedTests": 1,
  "numPendingTests": 3,
  "numTodoTests": 0,
  "snapshot": {
    "added": 0,
    "failure": false,
    "filesAdded": 0,
    "filesRemoved": 0,
    "filesRemovedList": [],
    "filesUnmatched": 0,
    "filesUpdated": 0,
    "matched": 0,
    "total": 0,
    "unchecked": 0,
    "uncheckedKeysByFile": [],
    "unmatched": 0,
    "updated": 0,
    "didUpdate": false
  },
  "startTime": 1768595084580,
  "success": false,
  "testResults": [
    {
      "assertionResults": [
        {
          "ancestorTitles": ["App Smoke Test"],
          "fullName": "App Smoke Test renders without crashing",
          "status": "failed",
          "title": "renders without crashing",
          "duration": 1.9162000000000035,
          "failureMessages": [
            "ReferenceError: document is not defined\n    at render (C:\\Users\\Tommaso\\source\\repos\\smart-spotify-playlist-curator\\node_modules\\@testing-library\\react\\dist\\pure.js:256:5)\n    at C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/web-app/src/App.test.tsx:6:5\n    at file:///C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/node_modules/vitest/dist/chunks/traces.CCmnQaNT.js:142:27)\n    at trace (file:///C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"
          ],
          "meta": {}
        }
      ],
      "startTime": 1768595084938,
      "endTime": 1768595084939.9163,
      "status": "failed",
      "message": "",
      "name": "C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/web-app/src/App.test.tsx"
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["Spotify Integration: Search", "searchTrack"],
          "fullName": "Spotify Integration: Search searchTrack should find exact matches for known tracks",
          "status": "skipped",
          "title": "should find exact matches for known tracks",
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["Spotify Integration: Search", "searchTrack"],
          "fullName": "Spotify Integration: Search searchTrack should handle non-existent tracks without crashing",
          "status": "skipped",
          "title": "should handle non-existent tracks without crashing",
          "failureMessages": [],
          "meta": {}
        }
      ],
      "startTime": 1768595084580,
      "endTime": 1768595084580,
      "status": "passed",
      "message": "",
      "name": "C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/functions/tests/integration/search.test.ts"
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["Spotify Integration: Service Logic", "performSmartUpdate"],
          "fullName": "Spotify Integration: Service Logic performSmartUpdate should swap tracks and verify atomic updates via snapshot_id",
          "status": "skipped",
          "title": "should swap tracks and verify atomic updates via snapshot_id",
          "failureMessages": [],
          "meta": {}
        }
      ],
      "startTime": 1768595084580,
      "endTime": 1768595084580,
      "status": "passed",
      "message": "",
      "name": "C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/functions/tests/integration/spotify-service.test.ts"
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["AiService"],
          "fullName": "AiService should generate suggestions successfully",
          "status": "passed",
          "title": "should generate suggestions successfully",
          "duration": 1.3374000000000024,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["AiService"],
          "fullName": "AiService should handle invalid JSON response by throwing error",
          "status": "passed",
          "title": "should handle invalid JSON response by throwing error",
          "duration": 0.7075999999999851,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["AiService"],
          "fullName": "AiService should include negative constraints in prompt",
          "status": "passed",
          "title": "should include negative constraints in prompt",
          "duration": 0.17140000000000555,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["AiService"],
          "fullName": "AiService should include reference artists in prompt",
          "status": "passed",
          "title": "should include reference artists in prompt",
          "duration": 0.1338999999999828,
          "failureMessages": [],
          "meta": {}
        }
      ],
      "startTime": 1768595084853,
      "endTime": 1768595084856.1338,
      "status": "passed",
      "message": "",
      "name": "C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/functions/tests/unit/ai-service.test.ts"
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["ConfigService"],
          "fullName": "ConfigService should fetch enabled playlists successfully",
          "status": "passed",
          "title": "should fetch enabled playlists successfully",
          "duration": 2.9499999999999886,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["ConfigService"],
          "fullName": "ConfigService should return empty array if no playlists found",
          "status": "passed",
          "title": "should return empty array if no playlists found",
          "duration": 0.7252000000000294,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["ConfigService"],
          "fullName": "ConfigService should validate fetched config using Zod schema",
          "status": "passed",
          "title": "should validate fetched config using Zod schema",
          "duration": 0.6428000000000225,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["ConfigService"],
          "fullName": "ConfigService should handle Firestore errors",
          "status": "passed",
          "title": "should handle Firestore errors",
          "duration": 0.7791000000000281,
          "failureMessages": [],
          "meta": {}
        }
      ],
      "startTime": 1768595084879,
      "endTime": 1768595084883.779,
      "status": "passed",
      "message": "",
      "name": "C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/functions/tests/unit/config-service.test.ts"
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["Core Logic", "TrackCleaner"],
          "fullName": "Core Logic TrackCleaner should remove old tracks but keep VIPs",
          "status": "passed",
          "title": "should remove old tracks but keep VIPs",
          "duration": 1.2789999999999964,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["Core Logic", "TrackCleaner"],
          "fullName": "Core Logic TrackCleaner should enforce Max 2 Tracks limit per artist (excluding VIPs)",
          "status": "passed",
          "title": "should enforce Max 2 Tracks limit per artist (excluding VIPs)",
          "duration": 0.2973999999999819,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["Core Logic", "SlotManager"],
          "fullName": "Core Logic SlotManager should place Fixed VIPs in exact spots",
          "status": "passed",
          "title": "should place Fixed VIPs in exact spots",
          "duration": 0.31929999999999836,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["Core Logic", "SlotManager"],
          "fullName": "Core Logic SlotManager should find nearest empty slot when range is full",
          "status": "passed",
          "title": "should find nearest empty slot when range is full",
          "duration": 0.26249999999998863,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["Core Logic", "SlotManager"],
          "fullName": "Core Logic SlotManager should prioritize AI tracks in top 30 (Stratified Placement)",
          "status": "passed",
          "title": "should prioritize AI tracks in top 30 (Stratified Placement)",
          "duration": 0.25279999999997926,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["Core Logic", "SlotManager"],
          "fullName": "Core Logic SlotManager should avoid placing same artists consecutively (Smart Shuffle)",
          "status": "passed",
          "title": "should avoid placing same artists consecutively (Smart Shuffle)",
          "duration": 0.09309999999999263,
          "failureMessages": [],
          "meta": {}
        }
      ],
      "startTime": 1768595084854,
      "endTime": 1768595084856.3193,
      "status": "passed",
      "message": "",
      "name": "C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/functions/tests/unit/core.test.ts"
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["PlaylistOrchestrator"],
          "fullName": "PlaylistOrchestrator Path 1: Empty Playlist",
          "status": "passed",
          "title": "Path 1: Empty Playlist",
          "duration": 149.5138,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["PlaylistOrchestrator"],
          "fullName": "PlaylistOrchestrator Path 2: Under Target",
          "status": "passed",
          "title": "Path 2: Under Target",
          "duration": 1.7014999999999532,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["PlaylistOrchestrator"],
          "fullName": "PlaylistOrchestrator Path 3: Over Target (Aggressive Clean)",
          "status": "passed",
          "title": "Path 3: Over Target (Aggressive Clean)",
          "duration": 1.0842000000000098,
          "failureMessages": [],
          "meta": {}
        }
      ],
      "startTime": 1768595084952,
      "endTime": 1768595085104.0842,
      "status": "passed",
      "message": "",
      "name": "C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/functions/tests/unit/orchestrator.test.ts"
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["SpotifyService Retry Logic"],
          "fullName": "SpotifyService Retry Logic should retry on 429 Rate Limit",
          "status": "passed",
          "title": "should retry on 429 Rate Limit",
          "duration": 2.386700000000019,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["SpotifyService Retry Logic"],
          "fullName": "SpotifyService Retry Logic should refresh token and retry on 401 Unauthorized",
          "status": "passed",
          "title": "should refresh token and retry on 401 Unauthorized",
          "duration": 0.8212999999999511,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["SpotifyService Retry Logic"],
          "fullName": "SpotifyService Retry Logic should fail after max retries",
          "status": "passed",
          "title": "should fail after max retries",
          "duration": 1.4782000000000153,
          "failureMessages": [],
          "meta": {}
        }
      ],
      "startTime": 1768595084920,
      "endTime": 1768595084924.4783,
      "status": "passed",
      "message": "",
      "name": "C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/functions/tests/unit/spotify-service-retry.test.ts"
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["SpotifyService - Skeleton Strategy"],
          "fullName": "SpotifyService - Skeleton Strategy should execute Skeleton Strategy: Remove Non-VIPs -> Reorder VIPs -> Insert Blocks",
          "status": "passed",
          "title": "should execute Skeleton Strategy: Remove Non-VIPs -> Reorder VIPs -> Insert Blocks",
          "duration": 3.0408999999999935,
          "failureMessages": [],
          "meta": {}
        },
        {
          "ancestorTitles": ["SpotifyService - Skeleton Strategy"],
          "fullName": "SpotifyService - Skeleton Strategy should reorder VIPs if they are out of order in skeleton",
          "status": "passed",
          "title": "should reorder VIPs if they are out of order in skeleton",
          "duration": 302.135,
          "failureMessages": [],
          "meta": {}
        }
      ],
      "startTime": 1768595084852,
      "endTime": 1768595085157.135,
      "status": "passed",
      "message": "",
      "name": "C:/Users/Tommaso/source/repos/smart-spotify-playlist-curator/functions/tests/unit/spotify-service-skeleton.test.ts"
    }
  ]
}
